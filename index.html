<!doctype html>
<html lang="en" ng-app="xmp.app">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
	<title>Sample Recipient Page</title>
	<link href="https://fonts.googleapis.com/css?family=Roboto:400,400i,500,500i,700,700i,900,900i" rel="stylesheet">
	<link href="./deps/xmp/css/xmp.css" rel="stylesheet" media="screen">
	<link href="./css/bootstrap-select.css" rel="stylesheet" media="screen">
    <link href="./css/bootstrap.css" rel="stylesheet" media="screen">
	<link href="./css/main.css" rel="stylesheet" media="screen">
	<link href="https://ajax.xmcircle.com/ajax/libs/xmpl/1.9.1/xmp/css/xmp.css" rel="stylesheet" media="screen">

	<!-- XMPie XMPL library -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
	<!-- <script src="https://ajax.xmcircle.com/ajax/libs/xmpl/1.9.1/xmp/js/xmp.min.js"></script> -->
	<script type="text/javascript" src="./deps/xmp/js/xmp.js"></script>
    <script type="text/javascript" src="./js/bootstrap-select.js"></script>
    <script type="text/javascript" src="./js/bootstrap.js"></script>
	<script type="text/javascript" src="./xmpcfg.js"></script>
	<script type="text/javascript">

	   $(function(){
	      $(document).ready(function(){

	        var ridVal = getURLParameter('rid');
	        console.log('ResId = ' + ridVal);
	        if (ridVal === null){
	          $("#ridList option:last").prop('selected', true);
	          goByHREF();
	        }
	        else{
	          $('#ridList').selectpicker('val', ridVal);
	         // $('#ridList').val(ridVal);
	        }
	       });
	   });

	    function getURLParameter(name) {
	      return decodeURIComponent(
	        (new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)')
	          .exec(location.search)||[,""])[1].replace(/\+/g, '%20'))||null
	    }

	    function goByHREF(pageName) {
	        var winLocation = window.location;
	        var value = '?rid=' + $('#ridList').val();
            if (pageName == null) {
                return winLocation.replace(winLocation.origin + winLocation.pathname + value);
            }
            else {
                console.log(winLocation);
				return winLocation.href = pageName + value;
			}
	    }
	</script>
</head>
<body>
	<div class="main-wrapper">
		<header>
			<div class="navbar-fixed-top">
				<div class="container">
					<nav class="navbar navbar-default">
						<div class="container">
							<div class="navbar-header">
								<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
									<span class="sr-only">Toggle navigation</span>
									<span class="icon-bar"></span>
									<span class="icon-bar"></span>
									<span class="icon-bar"></span>
								</button>
								<a class="navbar-brand" href="#"><img src="./images/logo.png" alt="XMPie"/></a>
							</div>
							<div class="collapse navbar-collapse" id="navbar-collapse">
								<ul class="nav navbar-nav navbar-right">
									<li class="restart"><a href="#">Restart</a></li>
									<li class="dropdown">
										<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Emails<span class="caret"></span></a>
                                        <form method="GET" class="dropdown-menu">
                                            <select class="selectpicker" id="ridList" name="rid" onchange="goByHREF()">
                                                <option>Jerry.Jones@example.com</option>
                                                <option>Jennifer.Jones@example.com</option>
                                                <option>Jimmy.Jones@example.com</option>
                                                <option>Sandra.Smith@example.com</option>
                                                <option>Sam.Smith@example.com</option>
                                                <option>Mary.McAndrews@example.com</option>
                                                <option>Mike.McAndrews@example.com</option>
                                                <option>Gina.Green@example.com</option>
                                            </select>
                                        </form>
                                    </li>
									<li class="dropdown">
										<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Openxm pages<span class="caret"></span></a>
										<div class="dropdown-menu">
											<span class="title">Recepient ID:</span>
											<ul>
												<li><a href="#">Action</a></li>
												<li><a href="#">Another action</a></li>
												<li><a href="#">Something else here</a></li>
												<li><a href="#">Separated link</a></li>
												<li><a href="#">One more separated link</a></li>
											</ul>
										</div>
									</li>
									<li class="github"><a href="#">XMPL on GitHub</a></li>
									<li class="twitter"><a href="#">Twitter</a></li>
									<li class="facebook"><a href="#">Facebook</a></li>
								</ul>
							</div>
						</div>
						<button type="button" class="btn btn-bordered pull-right add-recipients">+ Add Recipients</button>
		            </nav>
		        </div>
			</div>
		</header>
		<div class="wrapper">
			<div class="container">
				<div class="promo">
                    <h1>Sample page</h1>
                    <p>Your journey into openXM by XMPIE starts here.</p>
                </div>
				<div ng-controller="XMPPersonalizedPage" xmp-tracking-page-name="landing page" xmp-cloak="">
					<div class="section" xmp-update-on-page-load xmp-ador="xmp.r['Visited']" xmp-value="1">
						<div class="holder">
							<header>
								<h1 class="pull-left">Text ADOR Example</h1>
								<a class="btn pdf pull-right" href="#"><span>View PDF</span></a>
							</header>
			                <div class="section-content">
			                    <div>{{xmp.r['First Name']}}</div>
			                    <div>Hello, {{xmp.r['First Name']}} {{xmp.r['Last Name']}}!</div>
			                </div>
			            </div>
			            <div class="holder">
							<h1>Image ADOR</h1>
							<!-- fetching an asset from the server -->
							<img xmp-image-asset="xmp.r['MainImage']"/>
							<!-- fetching an asset from the site images folder, using the ADOR to determine the value -->
							<img xmp-src="images/{{xmp.r['Image2']}}"/>
						</div>
						<div class="holder">
							<h1>Text File ADOR</h1>
		                    <div xmp-text-asset="xmp.r['Introduction']"></div>
			            </div>
		                <div class="holder">
		                    <h1>Style ADOR</h1>
		                    <span class="mark" xmp-class="xmp.r['Theme']">What's up? Now with regular class</span>
			            </div>
			            <div class="holder">
		                    <h1>Visibility ADOR</h1>
		                    <div xmp-show="xmp.r['IsStudent']">this text should be visible if isStudent is true</div>
			            </div>
			            <div class="holder">
			                <h1>Link ADOR</h1>
		                    <a xmp-href="{{xmp.r['Blog']}}" xmp-tracking-action='blog link clicked'>users blog</a>
			            </div>
			            <div class="holder">
			                <h1>Table ADOR</h1>
		                    <table>
		                        <tbody>
		                            <tr>
		                                <td>Calculs</td>
		                                <td><span>4</span></td>
		                            </tr>
		                            <tr>
		                                <td>C++</td>
		                                <td><span>2</span></td>
		                            </tr>
		                            <tr>
		                                <td>Javascript</td>
		                                <td><span>2</span></td>
		                            </tr>
		                        </tbody>
		                    </table>
			            </div>
			            <div class="holder">
		                    <h1>Social Media</h1>
							<ul class="social-networks">
								<!--
								the facebook examples require that the example site is hosted on a server
								and that app id is registed with this domain. also - all shared urls have to be absolute urls
								-->
							<!--<li>
									<a xmp-twitter-share
									xmp-url="http://www.pdfhummus.com/"
									xmp-shared-text="[attribute] I am {{ xmp.r['First Name']}} {{ xmp.r['Last Name']}}, and i approve this URL">Tweet</a>
								</li>
								<li>
									<xmp-facebook-share
									xmp-appID = "THE_APP_ID"
									xmp-caption = "registration page"
									xmp-name = "uCreate Digital Rocks"
									xmp-description = "uCreate Digital is XMPie web tech"
									xmp-thumbnail-asset = "xmp.r['MainImage']"
									xmp-target-link = "register.html"
									></xmp-facebook-share>
								</li>-->
								<li>
									<span>Share on facebook with site asset</span>
									<button type="button" class="btn xmp-facebook-share-btn"
									xmp-facebook-share
									xmp-appID = "THE_APP_ID"
									xmp-caption = "registration page"
									xmp-name = "uCreate Digital Rocks"
									xmp-description = "uCreate Digital is XMPie web tech"
									xmp-target-link = "./register.html"
									xmp-thumbnail = "./images/{{xmp.r['Image2']}}"
									xmp-track='share on facebook'></button>
								</li>
								<li>
									<span>Share on facebook with server asset</span>
									<xmp-facebook-share
									xmp-appID = "THE_APP_ID"
									xmp-caption = "registration page"
									xmp-name = "uCreate Digital Rocks"
									xmp-description = "uCreate Digital is XMPie web tech"
									xmp-thumbnail-asset = "xmp.r['MainImage']"
									xmp-target-link = "./register.html"
									></xmp-facebook-share>
								</li>
								<li>
									<span>The attribute of HTML <b>&lt;a&gt;</b> Tag</span>
									<a xmp-twitter-share
									xmp-url="http://www.pdfhummus.com/"
									xmp-shared-text="[attribute] I am {{ xmp.r['First Name']}} {{ xmp.r['Last Name']}}, and i approve this URL"></a>
								</li>
								<li>
									<span>The <b>xmp-twitter-share</b> element</span>
									<xmp-twitter-share
									xmp-url="http://www.pdfhummus.com/"
									xmp-shared-text="[element] I am {{ xmp.r['First Name']}} {{ xmp.r['Last Name']}}, and i approve this URL"/>
								</li>
							</ul>
						</div>
						<div class="button-holder text-center">
							<button class="btn" <a href="#" onclick="goByHREF('update.html')"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>Edit</button>
                             <button class="btn btn-minor" href="#" onclick="goByHREF('refer.html')">Refer A Friend</button>
						</div>
					</div>
				</div>
			</div>
		</div>
		<footer>
            <div class="container">
                <ul class="socials pull-right">
                    <li class="twitter"><a href="#">Twitter</a></li>
                    <li class="facebook"><a href="#">Facebook</a></li>
                </ul>
                <ul>
                    <li><a href="#">XMPIE</a></li>
                    <li><a href="#">Blog</a></li>
                </ul>
                <p>&copy; XMPie, All Rights Reserved</p>
            </div>
        </footer>
	</div>
	<script>
        $(window).scroll(function() {
            var scroll = $(window).scrollTop();
            if(scroll >= 30) {
              $(".main-wrapper").addClass("header-filled");
            } else {
              $(".main-wrapper").removeClass("header-filled");
            }
        });
    </script>
</body>
</html>
